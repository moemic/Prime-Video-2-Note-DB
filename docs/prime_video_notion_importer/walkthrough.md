# 修正内容の確認 (Walkthrough)

Notionデータベース内に同じタイトルの作品が既に登録されていないかを確認し、警告を表示する機能を実装しました。

## 変更内容の概要

### 1. 重複チェックAPIの実装
- `background.js` に `CHECK_DUPLICATE` メッセージハンドラーを追加しました。
- NotionのクエリAPIを使用し、`Name` プロパティが抽出されたタイトルと完全一致するページを検索します。

### 2. 重複警告UIの追加
- `popup.html` に、重複が見つかった際に表示される警告エリアを追加しました。
- 警告内には、既に登録されているNotionページへ直接飛べるリンクを含めています。

### 3. 自動チェックと再抽出への対応
- ポップアップ起動時のデータ抽出完了直後に、自動で重複チェックを実行します。
- ユーザーが手動でタイトル入力欄を編集し、フォーカスを外した（blur）際にも即座に再チェックを行うようにしました。

## 検証結果

### 手動検証手順
1. すでにNotionに登録済みの作品ページで拡張機能を開きます。
2. タイトル入力欄の下に「⚠️ すでに登録されています：Notionを開く」という警告が表示されることを確認してください。
3. 警告のリンクをクリックし、該当するNotionページが正しく開くことを確認してください。
4. タイトルをわざと変更して枠外をクリック（blur）した際、警告が消えることを確認してください。
5. 未登録の作品では警告が表示されないことを確認してください。

## 成果物
- `background.js`: 重複チェック用検索ロジックの追加
- `popup.html`: 警告エリアとスタイリングの追加
- `popup.js`: 自動チェックとイベントリスナーの追加
